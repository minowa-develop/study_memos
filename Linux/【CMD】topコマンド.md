# topコマンドについて

## コマンド

command|desc
-|-
top|使用率順
top -p {pid}|pidでフィルタリング
top -a|メモリ使用率順
top -d{sec}|更新間隔

## topコマンド実行後のコマンド操作

command|desc
-|-
m|メモリの表示切り替え
t|CPU使用率表示切り替え
e|プロセスの単位切り替え(b,m,g,t,p)
E|ヘッダーの単位切り替え
1|論理プロセッサーごとに表示
I|Irisモード,Solarisモード切り替え
O|任意の列でソート
P|CPU使用率でソート
M|メモリ使用率でソート
c|コマンド詳細表示
L|検索
u|ユーザフィルタリング
k|プロセスkill
r|renice(優先度変更)

## Irisモード、Solarisモードについて

mode|desc
-|-
Irisモード|1コア分の使用率、一つの論理プロセッサ分を100%とする
Solariモード|合計コアの使用率、すべての論理プロセッサの合計を100%とする

### Example

論理プロセッサが4つある場合で、あるアプリケーションが一つのプロセッサに対して50%の負荷がかかっていた場合

mode|desc
-|-
Irisモード|50%
Solarisモード|12.5%

Irisモードの場合は1キーで論理プロセッサごとの使用率を見た方がわかりやすく、Solarisモードの時は合計の使用率で確認したほうがよいかも

## ヘッダーの見方

### その他

column|desc
-|-
up|OS起動経過時間
users|ログインユーザ数
load average|ディスクIO待ちプロセス数 1分間, 5分間, 15分間平均
total|プロセス数
running|実行中プロセス数
sleeping|スリープ中のプロセス数
stopped|実行停止されたプロセス数(ctrl+z)
zombie|子プロセスからwaitシステムコールが戻ってこない状態のプロセス数

### CPU

column|desc
-|-
us|un-niced なユーザ空間プロセス (OS 上で動作するように作られたプログラム) が実行された時間のパーセンテージ
sy|カーネル空間プロセス (OS としての機能を司るプログラム) が実行された時間のパーセンテージ
ni|nice や renice 等により nice 値が変更されたユーザ空間プロセスが実行された時間のパーセンテージ
id|idle 状態を過ごしたプロセスの時間のパーセンテージ
wa|Disk IO が終わるのを待っているプロセスの実行時間のパーセンテージ
hi|ハードウェア割込みの時間のパーセンテージ
si|ソフトウェア割込みの時間のパーセンテージ
st|ハイパーバイザに徴収された実行時間のパーセンテージ

## プロセスの見方

column|desc
-|-
PID|プロセスID
USER|実行ユーザ
PR|primary(動的優先度)
NI|Nice value、相対優先度、0が基準で、負だと優先度が高く、正だと優先度が低い(静的優先度)
VIRT|Virtual Image、確保された仮想メモリ全て、スワップしたメモリ使用量を含む
RES|Resident size、 スワップしていない、使用した物理メモリのサイズ
SHR|Shared Mem size、 他のプロセスと共有される可能性のあるメモリのサイズ
S|state D:割り込み不能, R:実行中, S:スリープ状態, T:停止中, Z:ゾンビプロセス
